<mat-progress-bar mode="indeterminate" *ngIf="isFirstLoading"></mat-progress-bar>
<div *ngIf="!isFirstLoading">
  <h1>Markets</h1>
  <div class="titles">
    <div class="title">
      <h2>Best performing assets last 24h</h2>
    </div>
    <div class="title">
      <h2>Worst performing assets last 24h</h2>
    </div>
  </div>
  <div class="currencies">
    <div class="content">
      <ng-container *ngFor="let performer of performersSource">
        <div class="card">
          <mat-card>
            <mat-card-title-group>
              <mat-card-title>
                {{performer.symbol}}
              </mat-card-title>
              <mat-card-subtitle>{{performer.name}}</mat-card-subtitle>
              <img src="https://www.cryptocompare.com{{performer.logo}}"/>
            </mat-card-title-group>
            <mat-card-content [ngClass]="{
            'positive' : performer.changepct > 0,
            'negative' : performer.changepct < 0}">
              {{performer.changepct}}%
            </mat-card-content>
            <mat-card-content>
              <div style="width: 15px;" [ngClass]="{
                    'positive' : performer.updown == '▲',
                    'negative' : performer.updown == '▼'}">
                {{performer.updown}}
              </div>{{performer.price}}
            </mat-card-content>
          </mat-card>
        </div>
      </ng-container>
    </div>
  </div>
  <table #myTable mat-table [dataSource]="dataSource" multiTemplateDataRows class="mat-elevation-z0">
    <ng-container matColumnDef="rank">
      <th mat-header-cell *matHeaderCellDef style="width: 50px;">RANK</th>
      <td mat-cell *matCellDef="let row">{{row.rank}}</td>
    </ng-container>
    <ng-container matColumnDef="logo" class="logo">
      <th mat-header-cell *matHeaderCellDef style="width: 50px;"></th>
      <td mat-cell *matCellDef="let row"> <img src="https://www.cryptocompare.com{{row.logo}}" style="width: 30px;" />
      </td>
    </ng-container>
    <ng-container matColumnDef="name" class="name">
      <th mat-header-cell *matHeaderCellDef>CURRENCY</th>
      <td mat-cell *matCellDef="let row">{{row.name}}&nbsp;&nbsp;<span class="symbol">{{row.symbol}}</span></td>
    </ng-container>
    <ng-container matColumnDef="updown">
      <th mat-header-cell *matHeaderCellDef="let row" class="updown"></th>
      <td mat-cell *matCellDef="let row" style="width: 15px;" [ngClass]="{
                    'positive' : row.updown == '▲',
                    'negative' : row.updown == '▼'
                 }"> {{row.updown}} </td>
    </ng-container>
    <ng-container matColumnDef="price">
      <th mat-header-cell *matHeaderCellDef="let row" class="price">PRICE</th>
      <td mat-cell *matCellDef="let row" style="width: 115px;"> {{row.price}} </td>
    </ng-container>
    <ng-container matColumnDef="changepct">
      <th mat-header-cell *matHeaderCellDef="let row" class="changepct">LAST 24h</th>
      <td mat-cell *matCellDef="let row" style="width: 100px;" [ngClass]="{
            'positive' : row.changepct > 0,
            'negative' : row.changepct < 0
         }"> {{row.changepct}} %</td>
    </ng-container>
    <ng-container matColumnDef="totalvolume">
      <th mat-header-cell *matHeaderCellDef>TOTAL VOL.</th>
      <td mat-cell *matCellDef="let row"> {{row.totalvolume}} </td>
    </ng-container>
    <ng-container matColumnDef="circulatingsupply">
      <th mat-header-cell *matHeaderCellDef>CIRCULATING SUPPLY</th>
      <td mat-cell *matCellDef="let row"> {{row.circulatingsupply}} </td>
    </ng-container>
    <ng-container matColumnDef="marketcap">
      <th mat-header-cell *matHeaderCellDef>MARKET CAP</th>
      <td mat-cell *matCellDef="let row"><span>{{row.marketcap}}</span></td>
    </ng-container>
    <ng-container matColumnDef="buy">
      <th mat-header-cell *matHeaderCellDef></th>
      <td mat-cell *matCellDef="let row"><a class="actionbuttons" mat-stroked-button routerLink="/invest"><span
            class="material-icons-outlined" style="font-size: 20px;">attach_money</span></a></td>
    </ng-container>
    <ng-container matColumnDef="info">
      <th mat-header-cell *matHeaderCellDef></th>
      <td mat-cell *matCellDef="let row"><a class="actionbuttons" mat-stroked-button (click)="setRowInfo(row)"
          routerLink="/market"><span class="material-icons-outlined" style="font-size: 20px;">info</span></a></td>
    </ng-container>
    <tr mat-header-row class="mat-header-row" *matHeaderRowDef="columnsToDisplay"></tr>
    <tr mat-row *matRowDef="let row; columns: columnsToDisplay;" (click)="setRowInfo(row)" routerLink="/market"
      class="element-row">
    </tr>
  </table>
</div>